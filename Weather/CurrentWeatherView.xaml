<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Weather.CurrentWeatherView"
             x:Name="CurrentWeatherContentView"
             BackgroundColor="Transparent">

    <ScrollView>
        <Grid RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto"
              RowSpacing="20"
              Padding="20">
            <!-- Поле для ввода города и кнопка -->
            <HorizontalStackLayout Grid.Row="0" Spacing="10" HorizontalOptions="Center">
                <Entry x:Name="CityEntry" 
                       Placeholder="Введите город"
                       WidthRequest="200"
                       Text="Moscow"/>
                <Button Text="Обновить" 
                        Clicked="OnLoadWeatherClicked"/>
            </HorizontalStackLayout>

            <ActivityIndicator Grid.Row="1"
                             IsRunning="{Binding IsLoading}"
                             IsVisible="{Binding IsLoading}"
                             HorizontalOptions="Center"/>

            <Label Grid.Row="2" 
                   Text="Данные о погоде отсутствуют"
                   IsVisible="{Binding NoDataVisible}"
                   HorizontalOptions="Center"/>

            <!-- Основная плашка с текущей погодой -->
            <Frame Grid.Row="3"
                   IsVisible="{Binding HasData}"
                   Padding="20" 
                   CornerRadius="20"
                   BackgroundColor="#CBBDFF"
                   HorizontalOptions="Fill">
                <VerticalStackLayout Spacing="15" HorizontalOptions="Center">
                    <Label Text="{Binding CurrentDate}" 
                           FontSize="16"
                           TextColor="#413755"
                           HorizontalOptions="Center"/>

                    <Image Source="{Binding CurrentIconUrl}"
                           HeightRequest="80"
                           WidthRequest="80"
                           HorizontalOptions="Center"/>

                    <Label Text="{Binding CurrentTemperature}" 
                           FontSize="32"
                           TextColor="#413755"
                           FontAttributes="Bold"
                           HorizontalOptions="Center"/>

                    <Label Text="{Binding CurrentDescription}" 
                           FontSize="16"
                           TextColor="#413755"
                           HorizontalOptions="Center"/>

                    <Label Text="{Binding CurrentHumidity, StringFormat='Влажность: {0}%'}" 
                           FontSize="14"
                           TextColor="#413755"
                           HorizontalOptions="Center"/>

                    <Label Text="{Binding CurrentWind, StringFormat='Ветер: {0} м/с'}" 
                           FontSize="14"
                           TextColor="#413755"
                           HorizontalOptions="Center"/>
                </VerticalStackLayout>
            </Frame>

            <!-- Прогноз по времени - в один ряд -->
            <ScrollView Grid.Row="4"
                        Orientation="Horizontal"
                        IsVisible="{Binding HasData}"
                        HorizontalOptions="Fill">
                <HorizontalStackLayout Spacing="15" Padding="10"
                                       BindableLayout.ItemsSource="{Binding HourlyForecast}">
                    <BindableLayout.ItemTemplate>
                        <DataTemplate>
                            <Frame Padding="15" 
                                   CornerRadius="15"
                                   BackgroundColor="#E6DDFF"
                                   HeightRequest="170"
                                   WidthRequest="110"
                                   HorizontalOptions="Center">
                                <VerticalStackLayout Spacing="8" HorizontalOptions="Center">
                                    <Label Text="{Binding Time}" 
                                           FontSize="12"
                                           TextColor="#413755"
                                           HorizontalOptions="Center"/>

                                    <Image Source="{Binding IconUrl}"
                                           HeightRequest="40"
                                           WidthRequest="40"
                                           HorizontalOptions="Center"/>

                                    <Label Text="{Binding Temperature}" 
                                           FontSize="16"
                                           TextColor="#413755"
                                           FontAttributes="Bold"
                                           HorizontalOptions="Center"/>

                                    <Label Text="{Binding Description}" 
                                           FontSize="10"
                                           TextColor="#413755"
                                           HorizontalOptions="Center"
                                           HorizontalTextAlignment="Center"/>

                                    <Label Text="{Binding Humidity, StringFormat='Влажность: {0}%'}" 
       FontSize="10"
       TextColor="#413755"
       HorizontalOptions="Center"
       HorizontalTextAlignment="Center"/>
                                </VerticalStackLayout>
                            </Frame>
                        </DataTemplate>
                    </BindableLayout.ItemTemplate>
                </HorizontalStackLayout>
            </ScrollView>
        </Grid>
    </ScrollView>

</ContentView>